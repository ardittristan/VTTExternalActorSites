!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([,,function(e,t,n){e.exports=n(3)},function(e,t){globalThis.TextEditor=class{static decodeHTML(e){const t=this._decoder;return t.innerHTML=e,t.value}static enrichHTML(e,{secrets:t=!1,entities:n=!0,links:r=!0,rolls:o=!0,rollData:l=null}={}){const i=document.createElement("div");if(i.innerHTML=String(e),!t){i.querySelectorAll("section.secret").forEach((e=>e.parentNode.removeChild(e)))}let c=!0,a=[];if(n){c&&(a=this._getTextNodes(i));const e=["Actor","Item","Scene","JournalEntry","Macro","RollTable"].concat("Compendium"),t=new RegExp(`@(${e.join("|")})\\[([^\\]]+)\\](?:{([^}]+)})?`,"g");c=this._replaceTextContent(a,t,this._createEntityLink)}if(r){c&&(a=this._getTextNodes(i));const e=/(https?:\/\/)(www\.)?([^\s<]+)/gi;c=this._replaceTextContent(a,e,this._createHyperlink)}if(o){c&&(a=this._getTextNodes(i));const e=/\[\[(\/[a-zA-Z]+\s)?(.*?)([\]]{2,3})/gi;c=this._replaceTextContent(a,e,((...e)=>this._createInlineRoll(...e,l)))}return i.innerHTML}static _getTextNodes(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);for(;n.nextNode();)t.push(n.currentNode);return t}static _replaceTextContent(e,t,n){let r=!1;for(let o of e){const e=o.textContent.matchAll(t);for(let t of Array.from(e).reverse()){const e=n(...t);e&&(this._replaceTextNode(o,t,e),r=!0)}}return r}static _replaceTextNode(e,t,n){let r=e;t.index>0&&(r=e.splitText(t.index)),t[0].length<r.length&&r.splitText(t[0].length),r.replaceWith(n)}static _createEntityLink(e,t,n,r){const o={cls:["entity-link"],icon:null,dataset:{},name:r||n.replace(/.*\./g,"")},l=document.createElement("a");l.classList.add(...o.cls),l.draggable=!0;for(let[e,t]of Object.entries(o.dataset))l.dataset[e]=t;return l.innerHTML=`<i class="${o.icon}"></i> ${o.name}`,l}static _createHyperlink(e){const t=document.createElement("a");return t.classList.add("hyperlink"),t.href=e,t.target="_blank",t.rel="nofollow noopener",t.textContent=e,t}static _createInlineRoll(e,t,n,r){3===r.length&&(n+="]");const o=document.createElement("a");return o.classList.add("inline-roll"),o.innerHTML=`<i class="fas fa-dice-d20"></i> ${n}`,o}}}]);